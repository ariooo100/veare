{"version":3,"sources":["page-sections.js"],"names":["makeTemplate","strings","html","length","template","document","createElement","innerHTML","_templateObject","PageSectionContainer","_CustomElement2","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","shadowRoot","attachShadow","mode","ShadyCSS","prepareTemplate","styleElement","appendChild","importNode","content","_inherits","_createClass","key","value","fn","element","window","addEventListener","clearTimeout","setTimeout","setActiveState","_inView","_setActive","Array","prototype","slice","querySelectorAll","map","item","index","array","parent","_setUnactive","hasAttribute","setAttribute","dispatchEvent","CustomEvent","detail","wasActivated","getAttribute","removeAttribute","get","getBoundingClientRect","bottom","top","innerHeight","_CustomElement","template$1","PageSection","_CustomElement3","_this2","minVisible","Math","min","parseFloat","requiredVisiblePx","height","visibleHeight","max","customElements","define"],"mappings":"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","file":"webcomponents.js","sourcesContent":["(function () {\n'use strict';\n\nconst makeTemplate = function (strings) {\n    let html = strings[strings.length - 1];\n    let template = document.createElement('template');\n    template.innerHTML = html;\n    return template;\n};\n\nlet template = makeTemplate `<style>\n    :host{\n        display: inline-block;\n        flex: 0 1 auto;\n        box-sizing: border-box;\n        width: 100%;\n        height: auto;\n        min-height: 100vh;\n        align-self: center;\n    }\n  </style>\n  <slot></slot>\n`;\nclass PageSectionContainer extends HTMLElement {\n    constructor() {\n        super();\n        let shadowRoot = this.attachShadow({ mode: 'open' });\n        if (typeof ShadyCSS !== 'undefined') {\n            ShadyCSS.prepareTemplate(template, 'page-section-container');\n            ShadyCSS.styleElement(this);\n        }\n        shadowRoot.appendChild(document.importNode(template.content, true));\n    }\n    connectedCallback() {\n        let element = this;\n        var fn;\n        window.addEventListener('scroll', function () {\n            clearTimeout(fn);\n            fn = setTimeout(function () {\n                element.setActiveState();\n            }, 10);\n        });\n        setTimeout(function () {\n            element.setActiveState();\n        }, 1);\n    }\n    get _inView() {\n        return this.getBoundingClientRect().bottom > 0 && this.getBoundingClientRect().top < window.innerHeight;\n    }\n    setActiveState() {\n        if (this._inView) {\n            this._setActive();\n            Array.prototype.slice.call(this.querySelectorAll('page-section')).map(function (item, index, array) {\n                item.parent = item;\n                item.setActiveState();\n            });\n        }\n        else {\n            this._setUnactive();\n        }\n    }\n    _setActive() {\n        if (this.hasAttribute('active'))\n            return;\n        this.setAttribute('active', '');\n        this.dispatchEvent(new CustomEvent('activated', { 'detail': {\n                'wasActivated': this.getAttribute('wasActivated') !== null\n            } }));\n    }\n    _setUnactive() {\n        if (this.hasAttribute('active') && !this.hasAttribute('wasActivated')) {\n            this.setAttribute('wasActivated', '');\n        }\n        this.removeAttribute('active');\n        this.dispatchEvent(new CustomEvent('deactivated'));\n    }\n}\n\nlet template$1 = makeTemplate `<style>\n    :host{\n        display: inline-block;\n        flex: 0 1 auto;\n        box-sizing: border-box;\n        width: 100%;\n        height: auto;\n        min-height: 100vh;\n        align-self: center;\n    }\n  </style>\n  <slot></slot>\n`;\nclass PageSection extends HTMLElement {\n    constructor() {\n        super();\n        let shadowRoot = this.attachShadow({ mode: 'open' });\n        if (typeof ShadyCSS !== 'undefined') {\n            ShadyCSS.prepareTemplate(template$1, 'page-section');\n            ShadyCSS.styleElement(this);\n        }\n        shadowRoot.appendChild(document.importNode(template$1.content, true));\n    }\n    get _inView() {\n        var minVisible = Math.min(1, (parseFloat(this.getAttribute('requiredVisible')) || parseFloat(this.parent.getAttribute('requiredVisible')) || 0.6));\n        var requiredVisiblePx = minVisible * Math.min(this.getBoundingClientRect().height, window.innerHeight);\n        var visibleHeight = this.getBoundingClientRect().height;\n        visibleHeight += Math.min(0, this.getBoundingClientRect().top);\n        visibleHeight -= Math.max(0, (this.getBoundingClientRect().bottom - window.innerHeight));\n        return visibleHeight >= requiredVisiblePx;\n    }\n    setActiveState() {\n        if (this._inView) {\n            this._setActive();\n        }\n        else {\n            this._setUnactive();\n        }\n    }\n    _setActive() {\n        if (this.hasAttribute('active'))\n            return;\n        this.setAttribute('active', '');\n        this.dispatchEvent(new CustomEvent('activated', { 'detail': {\n                'wasActivated': this.getAttribute('wasActivated') !== null\n            } }));\n    }\n    _setUnactive() {\n        if (this.hasAttribute('active') && !this.hasAttribute('wasActivated')) {\n            this.setAttribute('wasActivated', '');\n        }\n        this.removeAttribute('active');\n        this.dispatchEvent(new CustomEvent('deactivated'));\n    }\n}\n\nwindow.customElements.define('page-sections', PageSectionContainer);\nwindow.customElements.define('page-section', PageSection);\n\n}());\n//# sourceMappingURL=page-sections.js.map\n"]}